<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script type="module">
    import { users } from './data/blogs.js'
    console.log(users)

    // user : {
    //   id: Number,
    //   name: String,
    //   email: String,
    //   blogs: BlogArray,
    //   comments: Array
    // }

    // blog: {
    //   id: Number,
    //   likeCount: Number,
    //   publish: Bool,
    //   title: String,
    //   tags: Array,
    //   comments: Array,
    // }

    // Q1: 自分のブログで最もlikeCountの多いもののtitleは？
<<<<<<< HEAD
    // 1.IDを引数で受け取って、ブログにデータを返す関数
      const getBlogById = (arr, id, type) => arr.filter(user => user.id === id)[0][type]
      
      console.log(getBlogById(users, 19, 'blogs'))
    
    // 2.ブログの中でlikeCountが最大のものを返す
      const getMostLikeBlog = blogs => Math.max(...blogs.map(x => x.likeCount))
      console.log(getMostLikeBlog(getBlogById(users, 19, 'blogs')))
=======
    // 1 idを引数で受け取ってブログのデータを返す関数
    // 2 ブログの中でlikeCountが最大のモノを返す

    // ブログゲットロボ ○
    const getBlogsById = (users, id) => {
      return users.filter(user => user.id === id)[0].blogs
    }

    // ライクカウントサーチロボ ○
    const getMostLikedBlog = blogs => {
      return blogs
        .slice()
        .sort((a, b) => a.likeCount > b.likeCount ? -1 : 1)[0]
    }

    const getTitle = blog => blog.title

    const myBlogs = getBlogsById(users, 24)
    const mostLikedBlog = getMostLikedBlog(myBlogs)
    const title = getTitle(mostLikedBlog)
    console.log(title)

    // const randNum = Math.floor(Math.random() * 10)

    // if(randNum <= 4){
    //   console.log('hoge')
    // }else if(randNum === 5){
    //   console.log('foo')
    // }else{
    //   console.log('bar')
    // }

    // if(randNum === 5){
    //   console.log('foo')
    // }else{
    //   if(randNum <= 4){
    //     console.log('hoge')
    //   }else{
    //     console.log('bar')
    //   }
    // }

    // const isSameNum = (num1, num2) => num1 === num2
    // const isSmallerThan = (value, n) => value <= n
    const a = [1, 3, 5, 7]
    const randNum = a[Math.floor(Math.random() * a.length)]

    switch (randNum) {
      case 1:
        console.log('1')
        break;
      case 3:
        console.log('3')
        break;
      case 5:
        console.log('5')
        break;
      case 7:
        console.log('7')
        break;
      default:
        break
    }

    
    if (randNum === 1) {

    } else if (randNum === 3) {

    } else if (randNum === 5) {

    } else if (randNum === 7) {

    } else {

    }

    // 単一責任の原則 => 5^ 1 * n
    // 根性コード    => 5 ^ n
    // 必ず関数化する
    // その関数の役割を明記する

>>>>>>> main

    // Q2: 自分のブログで非公開になっているものの中の最大のlikeCountは？そのタイトルは？
      const getMostLikePrivate = blogs => Math.max(...blogs.map(x => x.publish ? 0 : x.likeCount))
      const getTitleMostLikePrivate = blogs => [...blogs].map(x => [x.likeCount, x.title]).filter(y => y[0] == getMostLikePrivate(getBlogById(users, 8, 'blogs')))[0][1]
      
      console.log(getMostLikePrivate(getBlogById(users, 8, 'blogs')))
      console.log(getTitleMostLikePrivate(getBlogById(users, 8, 'blogs')))
      
    // Q3: 自分のブログの公開率は？
      // 公開数
      const countPublic = blogs => [...blogs].filter(x => x.publish).length
      // 全部
      const countBlogs = blogs => [...blogs].length

      console.log(countPublic(getBlogById(users, 8, 'blogs')) / countBlogs(getBlogById(users, 8, 'blogs')))

    // Q4: 自分のブログに最もついているタグは？、その個数は？
      // タグをとってくる
      const getTag = blogs => [...blogs].map(x => x.tags).flat()
      // オブジェクトにしてカウントする
      const countTag = arr => arr.reduce((a,b) => {
        !a[b] ? a[b] = 1 : a[b] += 1
        return a
      },{})

      const tagObject = countTag(getTag(getBlogById(users, 8, 'blogs')))
      
      const getMaxTags = (tags) => Object.entries(tags).sort((tag1, tag2) => tag1[1] > tag2[1] ? -1 : 1)[0]
      
      

      console.log(getTag(getBlogById(users, 8, 'blogs')))
      console.log(countTag(getTag(getBlogById(users, 8, 'blogs'))))
      console.log(getMaxTags(tagObject))
    // Q5: 全てのブログの中で最もLikeCountの多いもののタイトルは？

    // Q6: 全てのブログの中で最もLikeCountの多いもののユーザー名は？

    // Q7: 最もLike率の高いユーザーは？



  </script>
</body>

</html>